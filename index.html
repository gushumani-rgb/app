<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Work From Anywhere</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; }
    article { margin-bottom: 40px; }
    h2 { margin-bottom: 5px; }
    hr { margin: 15px 0; }
    p.meta { font-size: 0.9em; color: #555; }
    button { display: block; margin: 20px auto; padding: 10px 20px; font-size: 1em; }
  </style>
</head>
<body>

<h1>Work From Anywhere</h1>
<p>Total posts: <span id="total-posts">0</span></p>
<div id="posts"></div>
<button id="load-more">Load More</button>

<script>
  const POSTS_PER_PAGE = 5; // Number of posts to show at once
  let postsData = [];
  let currentIndex = 0;

  const postsContainer = document.getElementById('posts');
  const totalPostsEl = document.getElementById('total-posts');
  const loadMoreBtn = document.getElementById('load-more');

  // Fetch JSON from GitHub Pages
  fetch('index.json')
    .then(res => res.json())
    .then(posts => {
      postsData = posts;
      totalPostsEl.textContent = posts.length;
      renderPosts();
    })
    .catch(err => {
      console.error('Failed to load posts:', err);
      postsContainer.innerHTML = '<p style="color:red;">Failed to load posts.</p>';
      loadMoreBtn.style.display = 'none';
    });

  function renderPosts() {
    const end = Math.min(currentIndex + POSTS_PER_PAGE, postsData.length);
    for (let i = currentIndex; i < end; i++) {
      const p = postsData[i];
      const article = document.createElement('article');
      article.innerHTML = `
        <h2>${p.title}</h2>
        <p class="meta"><strong>Author:</strong> ${p.author} | <strong>Published:</strong> ${p.published}</p>
        <hr>
        ${p.content}
      `;
      postsContainer.appendChild(article);
    }
    currentIndex = end;

    // Hide button if all posts are loaded
    if (currentIndex >= postsData.length) {
      loadMoreBtn.style.display = 'none';
    }
  }

  loadMoreBtn.addEventListener('click', renderPosts);
</script>

</body>
</html>
